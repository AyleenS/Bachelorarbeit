\chapter{Verfeinerung für Error-, Ruhe- und Divergenz-Freiheit}

\section{Präkongruenz für Divergenz}

In diesem Kapitel soll die Menge der betrachteten Zustände noch einmal
erweitert werden. Somit werden dann Errors, Ruhe-Zustände und
Divergente-Zustände betrachtet. Es eignet sich also~\cite{Chilton2013} als
Quelle, da nun auch noch die Divergenz betrachtet wird. Diese wurde dort
gleichzeitig mit der Ruhe eingeführt und betrachtet. Da es sich nur um eine
Erweiterung der Präkongruenzen aus den letzten beiden Kapiteln handelt, wird
dabei ähnlich vorgegangen wie in den letzten beiden Kapiteln.\\
Wie bereits oben und im letzten Kapitel erwähnt wurden in~\cite{Chilton2013}
auch noch divergente Zustände als Fehler-Zustände betrachtet. Um zu klären, was
darunter verstanden wird, wird nun noch eine Definition für Divergenz gegeben.

\begin{Def}[Divergenz]
  Ein \emph{Divergenz-Zustand} ist ein Zustand in einem \EIO{}, der eine
  unendliche Folge an $\tau$s ausführen kann.%\\
  % Somit ist die Menge der Divergenz-Zustände in einem \EIO{} wie folgt formal
  % definiert: $Div := \{q\in Q\mid \forall i\in \mathbb{N}\; \exists q_i\in Q: q
  % \overset{\tau}{\Rightarrow} q_i~\mathrm{und}~\forall j\in N\backslash \{i\}:
  % q_i\neq q_j\}$.
\end{Def}

Als Erreichbarkeitsbegriff wird wieder die lokale Erreichbarkeit verwendet.
Da das Divergieren eines Systems nicht mehr verhindert werden kann, sobald ein
divergenter Zustand lokal erreichbar ist, ist Divergenz als ähnlich
\glqq{}schlimm\grqq{} zu bewerten wie ein Error.

\begin{Def}[error-, ruhe- und divergenz-freie Kommunikation]
  Zwei \EIO{}s $S_1$ und $S_2$ kommunizieren \emph{error-, ruhe- und
  divergenz-frei}, wenn in ihre Parallelkomposition $S_{12}$ keine Errors,
  Ruhe-Zustände und Divergenz-Zustände lokal erreichbar sind.
\end{Def}

\begin{Def}[Divergenz-Verfeinerungs-Basisrelation]
\label{DefDivBasisrel}
Für \EIO{}s $S_1$ und $S_2$ mit der gleichen Signatur wird $S_1\DBRel S_2$
geschrieben, wenn ein Error, Ruhe-Zustand oder Divergenz-Zustand in $S_1$ nur
dann lokal erreichbar ist, wenn er auch in $S_2$ lokal erreichbar ist. Diese
\emph{Basisrelation} stellt eine \emph{Verfeinerung} bezüglich \emph{Error},
\emph{Ruhe} und \emph{Divergenz} dar.\\
\DCRel{} bezeichnet die \emph{vollständige abstrakte Präkongruenz} von \DBRel{}
bezüglich $\cdot\|\cdot$.
\end{Def}

Da nun die grundlegenden Definitionen für Divergenz festgehalten sind,
kann man sich nun einen Begriff für die Traces von divergenten Zuständen
bilden. Da oben bereits festgehalten wurde, dass Divergenz als ähnlich
\glqq{}schlimmer\grqq{} Fehler anzusehen ist, wie Error und das Divergieren
eines Systems nicht mehr verminderbar ist, sobald ein divergenter Zustand
erreichbar ist, kommt für die Divergenztraces wieder die $\prune$-Funktion zu
Einsatz. Da jedoch nur die Präkongruenz aus dem Error-Kapitel weiter verfeinert
werden soll, sollen keine neuen Traces entstehen, die nicht bereits in \EL{}
enthalten sind. Es kann also nicht möglich sein abgeschnittene Traces beliebig
Fortzusetzen.

\begin{Def}[Divergenztraces]
  Sei $S$ ein \EIO{} und definiere:
  \begin{itemize}
    \item \emph{strikte Divergenztraces}: $\StDT{}(S) := \{w\in\Sigma ^*\mid
      q_0 \overset{w}{\Rightarrow} q\in Div\}$,
    \item \emph{gekürzte Divergenztraces}: $\PrDT{}(S) :=
      \bigcup\{\prunenew{}(w)\mid w\in\StDT{}(S)\}$.
  \end{itemize}
\end{Def}

Da in~\cite{Chilton2013} bereits direkt Divergenz mit betrachtet wurde, wird
dort die Flutung der Traces so vorgenommen, dass $\ET\subseteq \DT\subseteq
\QT$ gilt. Dies soll auch hier in diesem Kapitel erreicht werden. Somit kann
zwar die Semantik aus dem Error-Kapitel übernehmen werden, jedoch wird für die
Ruhe eine andere Semantik benötigt, die sich von der im letzten Kapitel
unterscheidet. Die Inklusionskette der Fehlertraces scheint auch von der
Hierarchie her auf die Bewertung zu passen, als wie kritisch die einzelnen
Fehler zu bewerten sind.

\begin{Def}[Ruhe- und Divergenz-Semantik]
\label{DefRuheDivSemantik}
  Sei $S$ ein \EIO{}.
  \begin{itemize}
    \item Die Menge der \emph{error-gefluteten Divergenztraces} von $S$ ist
      $\DT{}(S) := \PrDT{}(S)\cup \ET{}(S)$.
    \item Die Menge der \emph{divergenz-gefluteten Ruhetraces} von $S$ ist
      $\QT{}(S) := \StQT{}(S)\cup \DT{}(S)$.
  \end{itemize}
  Für zwei \EIO{}s $S_1, S_2$ mit der gleichen Signatur schreibt man $S_1\DRel
  S_2$, wenn $S_1\ERel S_2$, $\DT{}_1\subseteq \DT{}_2$ und
  $\QT{}_1\subseteq \QT{}_2$ gilt.
\end{Def}

In der letzten Definition wurde wieder durch das Fluten eine
Informationsvermischung vorgenommen. Im Fall von \DT{} mit den Errortraces und
im Fall von \QT{} mit den Divergenztraces. Jedoch entstehen hier wie im letzten
Kapitel keine neuen Traces, die nicht bereits in der error-gefluteten Sprache
\EL{} aus den Error-Kapitel enthalten wären. Somit kann diese Sprache ohne
weitere Flutung verwendet werden. Es folgt, dass die Relation \DRel{} ebenso
wie \QRel{} eine Einschränkung der Relation \ERel{} ist.\\
Ebenso wie in Satz~\ref{satzQuiSemantik} wird im nächsten Satz nur der
Vollständigkeit halber der erste und letzte Punkt erwähnt der Beweis dazu
findet sich in Satz~\ref{satzErrorSemanik}.

\begin{satz}[Error-, Ruhe- und Divergenz-Semantik für Parallelkompostionen]
\label{satzDivSemantik}
  Für zwei komponierbare \EIO{}s $S_1, S_2$ und ihre Komposition
  $S_{12}$ gilt:
  \begin{enumerate}
    \item $\ET{}_{12}=\cont (\prune ((\ET{}_1\|\EL{}_2)\cup
      (\EL{}_1\|\ET{}_2)))$,
    \item $\DT{}_{12}= \prunenew{}((\DT{}_1\|\EL{}_2)\cup
      (\EL{}_1\|\DT{}_2))\cup \ET{}_{12}$,
    \item $\QT{}_{12}=(\QT{}_1\|\QT{}_2)\cup \DT{}_{12}$,
    \item $\EL{}_{12}=(\EL{}_1\|\EL{}_2)\cup \ET{}_{12}$.
  \end{enumerate}
\end{satz}

\begin{proof} Es wird hier nur der 2.\ und 3.\ Punkt bewiesen.

  2. \glqq{}$\subseteq$\grqq{}:\\
  Es muss hier unterschieden, ob $w\in \PrDT{}_{12}\backslash \ET{}_{12}$ oder
  $w\in \ET{}_{12}$ betrachtet wird. Im zweiten Fall ist das $w$ in der rechten
  Seite der Gleichung enthalten. Deshalb wird im weiteren Verlauf dieses
  Beweises davon ausgegangen, dass $w\in \PrDT{}_{12}\backslash \ET{}_{12}$
  gilt, und es wird versucht zu zeigen, dass dieses $w$ ebenfalls in der
  rechten Seite enthalten ist. Aus der Definition~\ref{DefRuheDivSemantik} weiß
  man, dass ein $v\in O^*_{12}$ existiert, so dass $(q_{01},q_{02})
  \overset{w}{\Rightarrow} (q_1,q_2) \overset{v}{\Rightarrow} (q_1',q_2')$ mit
  $(q_1',q_2')\in Div_{12}$ gilt. Durch die Projektion auf die
  Transitionssysteme $S_1$ und $S_2$ erhält man $q_{01}
  \overset{w_1}{\Rightarrow} q_1 \overset{v_1}{\Rightarrow} q_1'$ und $q_{02}
  \overset{w_2}{\Rightarrow} q_2 \overset{v_2}{\Rightarrow} q_2'$ mit $w\in
  w_1\|w_2$ und $v\in v_1\|v_2$. Aus $(q_1',q_2')\in Div_{12}$ folgt, dass
  \oBdA{} $q_1'\in Div_1$ gilt, d.h.\ $w_1v_1\in \StDT{}_1$. Da $q_{02}
  \overset{w_2v_2}{\Rightarrow}$ gilt, erhält man $w_2v_2\in L_2\subseteq
  \EL{}_2$ gelten. Somit gilt insgesamt $wv\in \DT{}_1\|\EL{}_2$ und $w$ ist in
  der rechten Seite der Gleichung enthalten, da $v\in O_{12}^*$ gilt und dieser
  Wortteil somit durch die \prunenew{}-Funktion entfernt werden kann.

  2. \glqq{}$\supseteq$\grqq{}:\\
  Falls $w\in\ET{}_{12}$ gilt, ist dieses $w$ auch in der linken Seite der
  Gleichung enthalten. Somit wird für den Rest des Beweises dieser Inklusion
  davon ausgegangen, dass $w\in\prunenew{}((\DT{}_1\|\EL{}_2)\cup
  (\EL{}_1\|\DT{}_2))$ gilt. Dadurch lässt sich ein $v$ aus $O_{12}^*$ finden,
  sodass $wv\in (\DT{}_1\|\EL{}_2)\cup (\EL{}_1\|\DT{}_2)$ gilt. Es wird nun
  noch die Einschränkung vorausgesetzt, dass \oBdA{} $wv\in \DT{}_1\|\EL{}_2$
  gilt, d.h.\ es existieren $w_1v_1\in\DT{}_1$ und $w_2v_2\in\EL{}_2$ mit $w\in
  w_1\|w_2$ und $v\in v_1\|v_2$.
  \begin{itemize}
    \item Fall 1 ($w_1v_1\in \ET{}_1 \vee w_2v_2\in \ET{}_2$): \OBdA{} gilt
      $w_1v_1\in\ET{}_1$. Es kann sich nun bei $w_2v_2$ um ein Errortrace,
      Divergenztrace, Ruhetrace oder um ein ausführbares Trace aus dem
      Transitionssystem handeln, es gilt in jedem Fall $w_2v_2\in\EL{}_2$.
      Somit kann der erste Punkt von Satz~\ref{satzErrorSemanik} angewendet
      werden und es folgt damit, dass $w\in\ET{}_{12}$ gilt und $w$ deshalb in
      der linken Seite der Gleichung enthalten ist.
    \item Fall 2 ($w_1v_1\in \PrDT{}_1\backslash \ET{}_1 \wedge w_2\in
      \EL{}_2\backslash \ET{}_2$): Es gilt in diesem Fall, dass ein $u\in
      O_1^*\subseteq O_{12}^*$ existiert mit $q_{01} \overset{w_1}{\Rightarrow}
      q_1 \overset{v_1}{\Rightarrow} q_1' \overset{u}{\Rightarrow} q_1''\in
      Div_1$ und $q_{02} \overset{w_2}{\Rightarrow} q_2
      \overset{v_2}{\Rightarrow} q_2'$. An dieser Stelle kann nichts darüber
      gesagt werden, wie sich $S_2$ verhält, wenn $S_1$ das $u$ ausführt.
      \begin{itemize}
        \item Fall 2a) ($q_2' \overset{u|_{\Sigma
          _2}}{\not{\hspace{-0.1cm}\Rightarrow}}$): $S_2$ hat also nicht die
          Möglichkeit das $u$ gemeinsam mit $S_1$ auszuführen, es kommt also zu
          einem Kommunikationsfehler in der Parallelkomposition. Es existiert
          ein Präfix $t$ von $u|_{\Sigma _2}$ mit $w_2v_2t\in\MIT{}_2$. Somit
          folgt insgesamt, da $v$ und $u$ in $O_{12}^*$ enthalten sind, dass
          $w\in\ET{}_{12}$ gilt. Das $w$ ist also in der linken Seite der
          Gleichung enthalten.
        \item Fall 2b) ($q_2' \overset{u|_{\Sigma _2}}{\Rightarrow} q_2''$): Da
          $q_1''$ ein unendliche Folge an $\tau$s ausführen kann, ist dies auch
          für den zusammengesetzten Zustand von $q_1''$ und $q_2''$ in der
          Parallelkomposition möglich. Es gilt also für die Komposition
          $(q_{01},q_{02}) \overset{w}{\Rightarrow} (q_1,q_2)
          \overset{v}{\Rightarrow} (q_1',q_2') \overset{o}{\Rightarrow}
          (q_1'',q_2'')\in Div_{12}$ und somit ist $wvu$ in $\StDT{}_{12}$
          enthalten. Durch die parallel Ausführung von $u$ und $u|_{\Sigma _2}$
          entstehen nur Outputs und es gilt auch $u\in u\|u|_{\Sigma _2}$. Es
          folgt also, dass $w\in\PrDT{}_{12}$ gilt und somit die Zugehörigkeit
          zur linken Seite erfüllt ist.
      \end{itemize}
  \end{itemize}

  3. \glqq{}$\subseteq$\grqq{}:\\
  Diese Inklusionsrichtung kann analog zum Beweis der selben Inklusionsrichtung
  von Satz~\ref{satzQuiSemantik} gezeigt werden. Es muss dabei nur in der
  Argumentation die Menge $\ET{}_{12}$ durch die Menge $\DT{}_{12}$ ersetzt
  werden. Dadurch kann ebenso gefolgert werden, dass der erreichte Zustand
  $(q_1,q_2)$ kein Error-Zustand sein kann, da $\ET{}_{12}\subseteq \DT{}_{12}$
  gilt.

  3. \glqq{}$\supseteq$\grqq{}:\\
  Es muss wieder danach unterschieden werden, aus welcher Menge das betrachtete
  Element stammt. Falls $w$ ein Element von $\DT{}_{12}$ ist, so folgt die
  Zugehörigkeit zur linken Seite der Gleichung direkt. Somit wird für den
  weiteren Punkt dieses Beweises davon ausgegangen, dass $w\in \QT{}_1\|\QT_2$
  gilt. Für dieses $w$ soll dann gezeigt werden, dass es auch in $\QT_{12}$
  enthalten ist. Da $\QT_i=\StQT{}_i\cup \DT{}_i$ gilt, existieren für $w_1$
  und $w_2$ mit $w\in w_1\|w_2$ unterschiedliche Möglichkeiten:
  \begin{itemize}
    \item Fall 1 ($w_1\in \DT{}_1 \vee w_2\in \DT{}_2$): \OBdA{} gilt $w_1\in
      \DT{}_1$. Es kann nun $w_2\in \StQT{}_2 \subseteq L_2$ gelten oder
      $w_2\in \DT{}_2$ und somit gilt auf jeden Fall $w_2\in \EL{}_2$. Daraus
      kann mit dem zweiten Punkt dieses Satzes gefolgert werden, dass $w\in
      \DT{}_{12}$ gilt und somit $w$ in der linken Seite der Gleichung
      enthalten ist.
    \item Fall 2 ($w_1\in \StQT{}_1\backslash \DT{}_1 \wedge w_2\in \StQT{}_2
      \backslash \DT{}_2$): Dieser Fall läuft analog zu Fall 2 der selben
      Inklusionsrichtung des Beweises von Satz~\ref{satzQuiSemantik}.
  \end{itemize}
\end{proof}

Analog wie in den beiden vorgegangenen Kapiteln, ergibt sich aus diesem Satz
als direkte Folgerung, dass es sich bei der Relation \DRel{} um eine
Präkongruenz handelt.

\begin{prop}[Divergenz-Präkongurenz]
\label{propDivPrae}
  \DRel{} ist eine Präkongruenz bezüglich $\cdot\|\cdot$.
\end{prop}

\begin{proof}
  Um zu zeigen, dass es sich bei \DRel{} um eine Präkongruenz handelt, muss
  nachgewiesen werden, dass $S_{31}\DRel{} S_{32}$ für jedes komponierbare
  System $S_3$ gilt, wenn $S_1\DRel{} S_2$ erfüllt ist.  D.  h.\   es     ist
  zu zeigen, dass auch $S_1\ERel{} S_2$, $\DT{}_1\subseteq \DT{}_2$ und
  $\QT{}_1\subseteq \QT{}_2$ sowohl $S_{31}\ERel{} S_{32}$,
  $\DT{}_{31}\subseteq \DT_{32}$ als auch $\QT{}_{31}\subseteq \QT{}_{32}$
  folgt. Dies ergibt sich wie in den Beweisen zu den
  Propositionen~\ref{propPraekongruenz} und~\ref{propQuiPrae} aus der Monotonie
  von $\cdot\|\cdot$ auf Sprachen wie folgt:
  \begin{itemize}
    \item $\begin{aligned}[t]
        S_{31}
        \overset{\mathrm{Proposition}~\ref{propPraekongruenz}}{%
        \overset{\mathrm{und}}{\overset{S_1\ERel{} S_2}{\ERel{}}}} S_{32}
    \end{aligned}$
    \item $\begin{aligned}[t]
        \DT{}_{31} &\overset{\ref{satzDivSemantik}~2.}{=}
        \prunenew{}((\DT{}_3\|\EL{}_1) \cup (\EL{}_3\|\DT{}_1)) \cup
        \ET{}_{31}\\
        &\hspace{-0.5cm}\overset{\ET{}_{31}\subseteq
      \ET{}_{32},}{\overset{\EL{}_1\subseteq
      \EL{}_2}{\overset{\mathrm{und}}{\overset{\DT{}_1\subseteq
    \DT{}_2}{\subseteq}}}} \prunenew{}((\DT{}_3\|\EL{}_2) \cup
    (\EL{}_3\|\DT{}_2)) \cup \ET{}_{32}\\
      &\overset{\ref{satzDivSemantik}~2.}{=} \DT{}_{32},
    \end{aligned}$
    \item $\begin{aligned}[t]
        \QT{}_{31} &\overset{\ref{satzDivSemantik}~3.}{=} (\QT{}_3\|\QT{}_1)
        \cup \DT{}_{31}\\
        &\hspace{-0.5cm}\overset{\DT{}_{31}\subseteq
      \DT{}_{32},}{\overset{\mathrm{und}}{\overset{\QT{}_1\subseteq
      \QT{}_2}{\subseteq}}} (\QT{}_3\|\QT{}_2) \cup \DT{}_{32}\\
      &\overset{\ref{satzDivSemantik}~3.}{=} \QT{}_{32}.
    \end{aligned}$
  \end{itemize}
\end{proof}

Als nächstes soll nun eine Verfeinerungsrelation bezüglich guter Kommunikation
mit Partnern im Sinne von error-, ruhe- und divergenz-freier Kommunikation
betrachtet werden. Es muss in diesem Lemma eine Veränderung zu den analogen
Lemmata aus den vorangegangen Kapiteln vorgenommen. Die Einschränkung, dass $U$
ein Partner sein muss, kann nicht mehr beibehalten werden, da die Vermeidung
von Ruhe im Beweis aus dem letzten Kapitel hier zu Divergenz führen würde.
Somit werden dafür Aktionen außerhalb der Menge $Synch$ benötigt.

\begin{lem}[Vereinerung mit Divergenz-Zuständen]
\label{lemDivVerfeinerung}
  Gegeben sind zwei \EIO{}s $S_1$ und $S_2$ mit der gleichen Signatur. Wenn
  $U\|S_1\DBRel{} U\|S_2$ für komponierbaren $U$ gilt, dann folgt daraus
  $S_1\DRel{} S_2$.
\end{lem}

\begin{proof}
  %TODO
  \scriptsize\textcolor{lgray}{$\ET{}_1\subseteq\ET{}_2$ kann nicht garantiert
  werden, da divergenz in $S_2$ nicht verhindert werden kann durch ein $U$.}
  \normalsize
\end{proof}

Der folgenden Satz hält fest, dass \DRel{} die gröbste Präkongruenz bezüglich
$\cdot\|\cdot$ charakterisiert, die in \DBRel{} enthalten ist.

\begin{satz}[Full Abstractness für Divergenz-Semantik]
\label{satzDivFullAbst}
  Seinen $S_1$ und $S_2$ zwei \EIO{}s mit derselben Signatur. Dann gilt $S_1
  \DCRel{} S_2\Leftrightarrow S_1\DRel{} S_2$, insbesondere ist \DRel{} eine
  Präkongruenz.
\end{satz}

\begin{proof}
  \glqq{}$\Leftarrow$\grqq{}: Nach Definition gilt $w\in\DT{}(S)$ mit $w\in
  O^*$, genau dann wenn in $S$ ein Divergenz-Zustand, ein Ruhe-Zustand oder ein
  Error-Zustand lokal erreichbar ist. $S_1\DRel S_2$ impliziert, dass
  $w\in\DT{}_2$ gilt, wenn $w\in\DT{}_1$ gilt. Somit ist ein Divergenz-Zustand,
  ein Ruhe-Zustand oder ein Error-Zustand nur dann in $S_1$ lokal erreichbar,
  wenn auch ein solcher in $S_2$ lokal erreichbar ist. Daraus folgt, dass
  $S_1\DBRel S_2$ gilt. Somit ist \DRel{} in \DBRel{} enthalten. In
  Proposition~\ref{propDivPrae} wurde festgestellt, dass \DRel{} eine
  Präkongruenz ist. Da jedoch \DCRel{} nach Definition die gröbste Präkongruenz
  bezüglich $\cdot\|\cdot$ ist, die in \DBRel{} enthalten ist, muss \DRel{} in
  \DCRel{} enthalten sein. Es folgt also aus $S_1\DRel S_2$,
  dass auch der relationale Zusammenhang $S_1\DCRel S_2$ gilt.

  \glqq{}$\Rightarrow$\grqq{}: Durch die Definition von \DCRel{} als
  Präkongruenz in~\ref{DefDivBasisrel} folgt aus $S_1\DCRel{} S_2$, dass
  $U\|S_1\DCRel U\|S_2$ für alle EIOs $U$ gilt, die mit $S_1$ komponierbar sind.
  Somit folgt auch die Gültigkeit von $U\|S_1\DBRel U\|S_2$ für alle diese EIOs
  $U$. Mit Lemma~\ref{lemDivVerfeinerung} folgt dann $S_1\QRel{} S_2$.
\end{proof}

Es wurde somit, wie in den letzten beiden Kapiteln, eine Kette an Folgerungen
gezeigt, die sich zu einem Ring schließen. Jedoch wird dafür ein Schritt
weniger benötigt, da in Lemma~\ref{lemDivVerfeinerung} bereits direkt $U$ nur
als komponierbar und nicht als Partner vorausgesetzt wurde. Diese
Folgerungskette ist in Abbildung~\ref{FolgerungsketteDiv} dargestellt.

\begin{figure}[h!tbp]
  \begin{center}
    \begin{tikzpicture}
      \matrix (m) [matrix of math nodes,row sep=2cm,column sep=4cm]{%
        S_1\DRel S_2 & S_1\DCRel S_2 \\
        & \substack{\forall~\mathrm{komponierbaren}~U:\\U\|S_1\DBRel U\|S_2}
      \\};
        \draw[-implies, double, double distance=1mm]
          (m-1-1) -- node [above] {\glqq{}$\Leftarrow$\grqq{} von
            Satz~\ref{satzDivFullAbst}} (m-1-2);
        \draw[-implies, double, double distance=1mm]
          (m-1-2) -- node [right] {Definition von \DCRel{}
          in~\ref{DefDivBasisrel}} (m-2-2);
        \draw[-implies, double, double distance=1mm]
          (m-2-2) -- node [below left]
          {Lemma~\ref{lemDivVerfeinerung}} (m-1-1);
    \end{tikzpicture}
    \caption{Folgerungskette}
\label{FolgerungsketteDiv}
  \end{center}
\end{figure}

Aus Satz~\ref{satzDivFullAbst} und Lemma~\ref{lemDivVerfeinerung} erhält man
das folgende Korollar. Angenommen man definiert, dass $S_1$ $S_2$ verfeinern
soll, genau dann wenn für alle Partner \EIO{}s $U$, für die $S_2$ error-, ruhe-
und divergenz-frei mit $U$ kommuniziert, folgt, dass $S_1$ ebenfalls error-,
ruhe- und divergenz-frei mit $U$ kommuniziert. Dann wird auch diese
Verfeinerung durch \DRel{} charakterisiert.

\begin{kor}
  Es gilt: $S_1\DRel{} S_2 \Leftrightarrow U\|S_1\DBRel{} U\|S_2$ für alle
  komponierbaren $U$.
\end{kor}

\section{Hiding und Divergenz-Freiheit}

Da durch den Internalisierungsoperator Outputs in $\tau$s umgewandelt werden,
hat das Hiding auf die Divergenz-Eigenschaft eine recht große Auswirkung. Die
Menge der divergenten Zustände kann sich somit durch das Internalisieren
vergrößern. Es kann ein Zustand divergent werden, wenn von diesem aus bereits
lokal ein divergenter Zustand erreichbar war oder wenn er eine unendliche
Folge von Aktionen aus $X\cup\{\tau\}$ ausführen konnte, jedoch nur endlich
viele davon $\tau$s waren. Somit kann die Basisrelation für Divergenz auf jeden
Fall nicht erhalten bleiben unter Internalisierung.
